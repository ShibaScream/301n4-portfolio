var blogController=function(){"use strict";var l={};return l.show=function(l,t){blogView.initPage(l.articles)},l.loadAll=function(l,t){var a=function(){l.articles=blogData.all,t()};blogData.all.length?a():blogData.fetchAll(a)},l}();
var blogData=function(){"use strict";function t(t){Object.keys(t).forEach(function(a,l,e){this[a]=t[a]},this)}return t.all=[],t.loadAll=function(a){this.all=a.sort(function(t,a){return new Date(a.publishedOn)-new Date(t.publishedOn)}).map(function(a){return new t(a)})},t.fetchAll=function(a){localStorage.articleData&&"undefined"!==localStorage.articleData?(this.loadAll(JSON.parse(localStorage.articleData)),a()):$.getJSON("../data/articleData.json",function(l){t.loadAll(l),localStorage.setItem("articleData",JSON.stringify(t.all)),a()}).fail(function(t,a){console.error("Blog failed to load. Error: ",a)})},t}();
var blogView=function(){"use strict";var e={templateScript:$("#portfolioTemplate").html(),theTemplate:null};return e.setTeasers=function(){$(".article-body *:nth-of-type(n+2)").hide();var e=$("#projects");e.on("click","a.read-on",function(e){e.preventDefault(),$(this).parent().find("*").fadeIn(),$(this).hide(),$(this).parent().find("a.read-less").show()}),e.on("click","a.read-less",function(e){e.preventDefault(),$(".article-body *:nth-of-type(n+2)").hide(),$(this).hide(),$(this).parent().find("a.read-on").show()})},e.toHTML=function(t){return t.daysAgo=parseInt((new Date-new Date(t.publishedOn))/60/60/24/1e3,10),t.publishStatus=t.publishedOn?"published "+t.daysAgo+" days ago":"(draft)",this.theTemplate=Handlebars.compile(e.templateScript),this.theTemplate(t)},e.initPage=function(t){$(".section-view").hide();var n=$("#projects");n.empty(),t.forEach(function(t){n.append(e.toHTML(t))}),$("pre code").each(function(e,t){hljs.highlightBlock(t)}),e.setTeasers(),n.show()},e}();
var contactController=function(){"use strict";var t={};return t.show=function(){$(".section-view").hide(),$("#contact").show()},t}();
var indexController=function(){"use strict";var e={};return e.show=function(){$(".section-view").hide(),$("#home").show(),repos.requestRepos(reposView.index)},e}();
!function(){"use strict";var e={};e.toggleMobileMenu=function(){var e=$("#menu"),i=$("#mobilemenu");i.on("click",function(){e.find("ul").fadeToggle("fast")}),e.on("click",function(){"block"===i.css("display")&&e.find("ul").fadeToggle("fast")})},e.hideMobileMenu=function(){$("#menu").find("ul").fadeOut("fast")},e.checkSize=function(){"block"===$("#mobilemenu").css("display")?$("main").on("click",e.hideMobileMenu):$("main").off("click",e.hideMobileMenu)},$(document).ready(function(){e.toggleMobileMenu(),e.checkSize(),$(window).resize(_.debounce(e.checkSize,500))})}();
var repos=function(){"use strict";var e={};return e.all=[],e.requestRepos=function(r){$.ajax({url:"/github/users/ShibaScream/repos?per_page=100&sort=updated",type:"GET",success:function(r,t,u){e.all=r}}).done(r)},e.with=function(r){return e.all.filter(function(e){return e[r]})},e}();
var reposView=function(){"use strict";var e={},t=Handlebars.compile($("#repo-template").html());return e.index=function(){var e=$("#github");e.empty(),e.append(repos.with("name").map(t))},e}();
var resumeController=function(){"use strict";var e={};return e.show=function(e,t){resumeView.initPage(e.jobs)},e.loadAll=function(e,t){var a=function(){e.jobs=resumeData.all,t()};resumeData.all.length?a():resumeData.fetchAll(a)},e}();
var resumeData=function(){"use strict";function e(e){Object.keys(e).forEach(function(t,a,o){this[t]=e[t]},this)}return e.all=[],e.loadAll=function(t){this.all=t.sort(function(e,t){return new Date(t.dateFrom)-new Date(e.dateFrom)}).map(function(t){return new e(t)})},e.fetchAll=function(t){localStorage.resumeData&&"undefined"!==localStorage.resumeData?(this.loadAll(JSON.parse(localStorage.resumeData)),t()):$.getJSON("../data/resumeData.json",function(a){e.loadAll(a),localStorage.setItem("resumeData",JSON.stringify(e.all)),t()}).fail(function(e,t,a){console.error("Resume failed to load. Error: ",t)})},e}();
var resumeView=function(){"use strict";var e={templateScript:$("#resumeTemplate").html(),theTemplate:null};return e.toHTML=function(t){return this.theTemplate=Handlebars.compile(e.templateScript),this.theTemplate(t)},e.initPage=function(t){$(".section-view").hide();var i=$("#resume");i.empty(),t.forEach(function(t){i.append(e.toHTML(t))}),i.show()},e}();
page("/",indexController.show),page("/projects",blogController.loadAll,blogController.show),page("/resume",resumeController.loadAll,resumeController.show),page("/contact",contactController.show),page("*",function(){console.error("This should be a 404 Error Page")}),page();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJsb2dDb250cm9sbGVyLmpzIiwiYmxvZ0RhdGEuanMiLCJibG9nVmlldy5qcyIsImNvbnRhY3RDb250cm9sbGVyLmpzIiwiaW5kZXhDb250cm9sbGVyLmpzIiwibWVudUhhbmRsZXIuanMiLCJyZXBvcy5qcyIsInJlcG9zVmlldy5qcyIsInJlc3VtZUNvbnRyb2xsZXIuanMiLCJyZXN1bWVEYXRhLmpzIiwicmVzdW1lVmlldy5qcyIsInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJibG9nQ29udHJvbGxlciIsImNvbnRyb2xsZXIiLCJzaG93IiwiY3R4IiwibmV4dCIsImJsb2dWaWV3IiwiaW5pdFBhZ2UiLCJhcnRpY2xlcyIsImxvYWRBbGwiLCJsb2FkQXJ0aWNsZXMiLCJibG9nRGF0YSIsImFsbCIsImxlbmd0aCIsImZldGNoQWxsIiwiQXJ0aWNsZSIsIm9wdHMiLCJPYmplY3QiLCJrZXlzIiwiZm9yRWFjaCIsImUiLCJpbmRleCIsInRoaXMiLCJkYXRhIiwic29ydCIsImEiLCJiIiwiRGF0ZSIsInB1Ymxpc2hlZE9uIiwibWFwIiwiYXJ0aWNsZSIsImNhbGxiYWNrIiwibG9jYWxTdG9yYWdlIiwiYXJ0aWNsZURhdGEiLCJKU09OIiwicGFyc2UiLCIkIiwiZ2V0SlNPTiIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJmYWlsIiwieCIsInRleHRTdGF0dXMiLCJjb25zb2xlIiwiZXJyb3IiLCJ2aWV3IiwidGVtcGxhdGVTY3JpcHQiLCJodG1sIiwidGhlVGVtcGxhdGUiLCJzZXRUZWFzZXJzIiwiaGlkZSIsIiRwcm9qZWN0cyIsIm9uIiwicHJldmVudERlZmF1bHQiLCJwYXJlbnQiLCJmaW5kIiwiZmFkZUluIiwidG9IVE1MIiwiZGF5c0FnbyIsInBhcnNlSW50IiwicHVibGlzaFN0YXR1cyIsIkhhbmRsZWJhcnMiLCJjb21waWxlIiwiZW1wdHkiLCJhcHBlbmQiLCJlYWNoIiwiaSIsImJsb2NrIiwiaGxqcyIsImhpZ2hsaWdodEJsb2NrIiwiY29udGFjdENvbnRyb2xsZXIiLCJpbmRleENvbnRyb2xsZXIiLCJyZXBvcyIsInJlcXVlc3RSZXBvcyIsInJlcG9zVmlldyIsIm1lbnVWaWV3IiwidG9nZ2xlTW9iaWxlTWVudSIsIiRtZW51IiwiJG1vYmlsZW1lbnUiLCJmYWRlVG9nZ2xlIiwiY3NzIiwiaGlkZU1vYmlsZU1lbnUiLCJmYWRlT3V0IiwiY2hlY2tTaXplIiwib2ZmIiwiZG9jdW1lbnQiLCJyZWFkeSIsIndpbmRvdyIsInJlc2l6ZSIsIl8iLCJkZWJvdW5jZSIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJ4aHIiLCJkb25lIiwid2l0aCIsImF0dHIiLCJmaWx0ZXIiLCJyZXBvIiwicmVwb1ZpZXciLCJyZW5kZXIiLCIkZ2l0aHViIiwicmVzdW1lQ29udHJvbGxlciIsInJlc3VtZVZpZXciLCJqb2JzIiwiam9iRGF0YSIsInJlc3VtZURhdGEiLCJKb2IiLCJkYXRlRnJvbSIsIml0ZW0iLCJ5Iiwiam9iIiwiJHJlc3VtZSIsInBhZ2UiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLGdCQUFrQixXQUNwQixZQUVBLElBQUlDLEtBdUJKLE9BckJBQSxHQUFXQyxLQUFPLFNBQVVDLEVBQUtDLEdBSS9CQyxTQUFTQyxTQUFTSCxFQUFJSSxXQUd4Qk4sRUFBV08sUUFBVSxTQUFVTCxFQUFLQyxHQUNsQyxHQUFJSyxHQUFlLFdBQ2pCTixFQUFJSSxTQUFXRyxTQUFTQyxJQUN4QlAsSUFHRU0sVUFBU0MsSUFBSUMsT0FDZkgsSUFFQUMsU0FBU0csU0FBU0osSUFLZlI7QUMxQlQsR0FBSVMsVUFBWSxXQUNkLFlBR0EsU0FBU0ksR0FBUUMsR0FDZkMsT0FBT0MsS0FBS0YsR0FBTUcsUUFBUSxTQUFTQyxFQUFHQyxFQUFPSCxHQUMzQ0ksS0FBS0YsR0FBS0osRUFBS0ksSUFDZkUsTUF1Q0osTUFuQ0FQLEdBQVFILE9BRVJHLEVBQVFOLFFBQVUsU0FBVWMsR0FFMUJELEtBQUtWLElBQU1XLEVBQ1JDLEtBQUssU0FBVUMsRUFBR0MsR0FDakIsTUFB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Z0JBQWdCcEUsTUFDMUJpSCxLQUFLLFlBQWFuSCxlQUFlUSxRQUFTUixlQUFlRSxNQUN6RGlILEtBQUssVUFBV1gsaUJBQWlCaEcsUUFBU2dHLGlCQUFpQnRHLE1BQzNEaUgsS0FBSyxXQUFZOUMsa0JBQWtCbkUsTUFHbkNpSCxLQUFLLElBQUssV0FDUnpFLFFBQVFDLE1BQU0scUNBR2hCd0UiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBibG9nQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgY29udHJvbGxlciA9IHt9O1xuXG4gIGNvbnRyb2xsZXIuc2hvdyA9IGZ1bmN0aW9uIChjdHgsIG5leHQpIHtcbiAgICAvLyBibG9nRGF0YS5mZXRjaEFsbChibG9nVmlldy5pbml0UGFnZSk7XG4gICAgLy8gJCgnLnNlY3Rpb24tdmlldycpLmhpZGUoKTtcbiAgICAvLyAkKCcjcHJvamVjdHMnKS5zaG93KCk7XG4gICAgYmxvZ1ZpZXcuaW5pdFBhZ2UoY3R4LmFydGljbGVzKTtcbiAgfTtcblxuICBjb250cm9sbGVyLmxvYWRBbGwgPSBmdW5jdGlvbiAoY3R4LCBuZXh0KSB7XG4gICAgdmFyIGxvYWRBcnRpY2xlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGN0eC5hcnRpY2xlcyA9IGJsb2dEYXRhLmFsbDtcbiAgICAgIG5leHQoKTtcbiAgICB9O1xuXG4gICAgaWYgKGJsb2dEYXRhLmFsbC5sZW5ndGgpIHtcbiAgICAgIGxvYWRBcnRpY2xlcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBibG9nRGF0YS5mZXRjaEFsbChsb2FkQXJ0aWNsZXMpO1xuICAgIH1cblxuICB9O1xuXG4gIHJldHVybiBjb250cm9sbGVyO1xuXG59KCkpO1xuIiwidmFyIGJsb2dEYXRhID0gKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8vIEFydGljbGUgY29uc3RydWN0b3IgLSBmb3IgbG9hZGluZyBKU09OIGRhdGEgaW50byBhcnRpY2xlIG9iamVjdHNcbiAgZnVuY3Rpb24gQXJ0aWNsZShvcHRzKSB7XG4gICAgT2JqZWN0LmtleXMob3B0cykuZm9yRWFjaChmdW5jdGlvbihlLCBpbmRleCwga2V5cykge1xuICAgICAgdGhpc1tlXSA9IG9wdHNbZV07XG4gICAgfSx0aGlzKTtcbiAgfVxuXG4gIC8vIG1vdmluZyB0aGUgYXJ0aWNsZXMgdmFyaWFibGUgb3V0IG9mIHRoZSBnbG9iYWwgbmFtZXNwYWNlXG4gIEFydGljbGUuYWxsID0gW107XG5cbiAgQXJ0aWNsZS5sb2FkQWxsID0gZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgIHRoaXMuYWxsID0gZGF0YVxuICAgICAgLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgRGF0ZShiLnB1Ymxpc2hlZE9uKSkgLSAobmV3IERhdGUoYS5wdWJsaXNoZWRPbikpO1xuICAgICAgfSlcbiAgICAgIC5tYXAoZnVuY3Rpb24gKGFydGljbGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBcnRpY2xlKGFydGljbGUpO1xuICAgICAgfSk7XG5cbiAgfTtcblxuICBBcnRpY2xlLmZldGNoQWxsID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cbiAgICBpZiAobG9jYWxTdG9yYWdlLmFydGljbGVEYXRhICYmIGxvY2FsU3RvcmFnZS5hcnRpY2xlRGF0YSAhPT0gJ3VuZGVmaW5lZCcpIHtcblxuICAgICAgdGhpcy5sb2FkQWxsKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmFydGljbGVEYXRhKSk7XG4gICAgICBjYWxsYmFjaygpO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgJC5nZXRKU09OKCcuLi9kYXRhL2FydGljbGVEYXRhLmpzb24nLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBBcnRpY2xlLmxvYWRBbGwoZGF0YSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhcnRpY2xlRGF0YScsIEpTT04uc3RyaW5naWZ5KEFydGljbGUuYWxsKSk7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9KS5mYWlsKGZ1bmN0aW9uICh4LCB0ZXh0U3RhdHVzKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Jsb2cgZmFpbGVkIHRvIGxvYWQuIEVycm9yOiAnLCB0ZXh0U3RhdHVzKTtcbiAgICAgIH0pO1xuXG4gICAgfVxuXG4gIH07XG4gIC8vIGF0dGFjaGluZyB0byBET01cbiAgcmV0dXJuIEFydGljbGU7XG5cbn0oKSk7XG4iLCJ2YXIgYmxvZ1ZpZXcgPSAoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIHZpZXcgPSB7XG4gICAgdGVtcGxhdGVTY3JpcHQ6ICQoJyNwb3J0Zm9saW9UZW1wbGF0ZScpLmh0bWwoKSxcbiAgICB0aGVUZW1wbGF0ZTogbnVsbFxuICB9O1xuXG4gIHZpZXcuc2V0VGVhc2VycyA9IGZ1bmN0aW9uICgpIHtcblxuICAgIC8vIEhpZGUgZWxlbWVudHMgYmV5b25kIHRoZSBmaXJzdCAyIGluIGFueSBhcnRpY2xlIGJvZHkuXG4gICAgJCgnLmFydGljbGUtYm9keSAqOm50aC1vZi10eXBlKG4rMiknKS5oaWRlKCk7XG5cbiAgICB2YXIgJHByb2plY3RzID0gJCgnI3Byb2plY3RzJyk7XG5cbiAgICAkcHJvamVjdHMub24oJ2NsaWNrJywgJ2EucmVhZC1vbicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJyonKS5mYWRlSW4oKTtcbiAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCdhLnJlYWQtbGVzcycpLnNob3coKTtcbiAgICB9KTtcblxuICAgICRwcm9qZWN0cy5vbignY2xpY2snLCAnYS5yZWFkLWxlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJCgnLmFydGljbGUtYm9keSAqOm50aC1vZi10eXBlKG4rMiknKS5oaWRlKCk7XG4gICAgICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgICQodGhpcykucGFyZW50KCkuZmluZCgnYS5yZWFkLW9uJykuc2hvdygpO1xuICAgIH0pO1xuXG4gIH07XG5cbiAgdmlldy50b0hUTUwgPSBmdW5jdGlvbiAoYXJ0aWNsZSkge1xuXG4gICAgLy8gd2hlcmUgc2hvdWxkIHRoaXMgbG9naWMgZXhpc3RzPyBTZWVtcyBpbmNvcnJlY3QgdG8gaGF2ZSBpdCBpbiB2aWV3XG4gICAgYXJ0aWNsZS5kYXlzQWdvID0gcGFyc2VJbnQoKG5ldyBEYXRlKCkgLSBuZXcgRGF0ZShhcnRpY2xlLnB1Ymxpc2hlZE9uKSkgLyA2MCAvIDYwIC8gMjQgLyAxMDAwLCAxMCk7XG4gICAgYXJ0aWNsZS5wdWJsaXNoU3RhdHVzID0gYXJ0aWNsZS5wdWJsaXNoZWRPbiA/ICdwdWJsaXNoZWQgJyArIGFydGljbGUuZGF5c0FnbyArICcgZGF5cyBhZ28nIDogJyhkcmFmdCknO1xuXG4gICAgdGhpcy50aGVUZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZSh2aWV3LnRlbXBsYXRlU2NyaXB0KTtcblxuICAgIHJldHVybiB0aGlzLnRoZVRlbXBsYXRlKGFydGljbGUpO1xuXG4gIH07XG5cblxuICB2aWV3LmluaXRQYWdlID0gZnVuY3Rpb24gKGFydGljbGVzKSB7XG4gICAgJCgnLnNlY3Rpb24tdmlldycpLmhpZGUoKTtcblxuICAgIHZhciAkcHJvamVjdHMgPSAkKCcjcHJvamVjdHMnKTtcblxuICAgICRwcm9qZWN0cy5lbXB0eSgpO1xuXG4gICAgYXJ0aWNsZXMuZm9yRWFjaChmdW5jdGlvbiAoYXJ0aWNsZSkge1xuICAgICAgJHByb2plY3RzLmFwcGVuZCh2aWV3LnRvSFRNTChhcnRpY2xlKSk7XG4gICAgfSk7XG5cbiAgICAkKCdwcmUgY29kZScpLmVhY2goZnVuY3Rpb24oaSwgYmxvY2spIHtcbiAgICAgIGhsanMuaGlnaGxpZ2h0QmxvY2soYmxvY2spO1xuICAgIH0pO1xuXG4gICAgdmlldy5zZXRUZWFzZXJzKCk7XG5cbiAgICAkcHJvamVjdHMuc2hvdygpO1xuICB9O1xuXG4gIHJldHVybiB2aWV3O1xuXG59KCkpO1xuIiwidmFyIGNvbnRhY3RDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBjb250cm9sbGVyID0ge307XG5cbiAgY29udHJvbGxlci5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICQoJy5zZWN0aW9uLXZpZXcnKS5oaWRlKCk7XG4gICAgJCgnI2NvbnRhY3QnKS5zaG93KCk7XG4gIH07XG5cbiAgcmV0dXJuIGNvbnRyb2xsZXI7XG5cbn0oKSk7XG4iLCJ2YXIgaW5kZXhDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBjb250cm9sbGVyID0ge307XG5cbiAgY29udHJvbGxlci5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICQoJy5zZWN0aW9uLXZpZXcnKS5oaWRlKCk7XG4gICAgJCgnI2hvbWUnKS5zaG93KCk7XG4gICAgcmVwb3MucmVxdWVzdFJlcG9zKHJlcG9zVmlldy5pbmRleCk7XG4gIH07XG5cbiAgcmV0dXJuIGNvbnRyb2xsZXI7XG5cbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIG1lbnVWaWV3ID0ge307XG5cbiAgbWVudVZpZXcudG9nZ2xlTW9iaWxlTWVudSA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciAkbWVudSA9ICQoJyNtZW51Jyk7XG4gICAgdmFyICRtb2JpbGVtZW51ID0gJCgnI21vYmlsZW1lbnUnKTtcblxuICAgICRtb2JpbGVtZW51Lm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICRtZW51LmZpbmQoJ3VsJykuZmFkZVRvZ2dsZSgnZmFzdCcpO1xuICAgIH0pO1xuXG4gICAgJG1lbnUub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCRtb2JpbGVtZW51LmNzcygnZGlzcGxheScpID09PSAnYmxvY2snKSB7XG4gICAgICAgICRtZW51LmZpbmQoJ3VsJykuZmFkZVRvZ2dsZSgnZmFzdCcpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIG1lbnVWaWV3LmhpZGVNb2JpbGVNZW51ID0gZnVuY3Rpb24gKCkge1xuICAgICQoJyNtZW51JykuZmluZCgndWwnKS5mYWRlT3V0KCdmYXN0Jyk7XG4gIH07XG5cbiAgLyoqKipcbiAgICBjcmVkaXQgdG8gaHR0cHM6Ly93d3cuZm91cmZyb250LnVzL2Jsb2cvanF1ZXJ5LXdpbmRvdy13aWR0aC1hbmQtbWVkaWEtcXVlcmllc1xuICAgIGZvdW5kIHdheSB0byBjaGVjayBpZiBpbiBtb2JpbGUgdmVyc2lvbiBvZiBzaXRlXG4gICAgb25seSB0aGVuLCBhdHRhY2ggZXZlbnQgbGlzdGVuZXIgdG8gbWFpbiBzbyBpZiBhIHVzZXIgY2xpY2tzIGl0IGhpZGVzIG1lbnVcbiAgICBjb25zaWRlciBhZGRpbmcgdW5kZXJzY29yZS5qcyBsaWJyYXJ5IGFuZCBfX2RlYm91bmNlIG1ldGhvZCB0byBob2xkIG9mZiBvbiBmaXJpbmdcbiAgICBmdW5jdGlvbiB1bnRpbCByZXNpemUgaXMgY29tcGxldGVkXG4gICoqKioqL1xuICBtZW51Vmlldy5jaGVja1NpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQoJyNtb2JpbGVtZW51JykuY3NzKCdkaXNwbGF5JykgPT09ICdibG9jaycpIHtcbiAgICAgICQoJ21haW4nKS5vbignY2xpY2snLCBtZW51Vmlldy5oaWRlTW9iaWxlTWVudSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJ21haW4nKS5vZmYoJ2NsaWNrJywgbWVudVZpZXcuaGlkZU1vYmlsZU1lbnUpO1xuICAgIH1cbiAgfTtcblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgbWVudVZpZXcudG9nZ2xlTW9iaWxlTWVudSgpO1xuICAgIC8vIGZpcmUgdGhlIGZpcnN0IHRpbWVcbiAgICBtZW51Vmlldy5jaGVja1NpemUoKTtcbiAgICAvLyBjaGVjayBhZ2FpbiBvbiByZXNpemUsIHVzaW5nIGRlYm91bmNlIHRvIGF2b2lkIG11bHRpcGxlIGZpcmluZ3NcbiAgICAkKHdpbmRvdykucmVzaXplKF8uZGVib3VuY2UobWVudVZpZXcuY2hlY2tTaXplLCA1MDApKTtcbiAgfSk7XG5cbn0oKSk7XG4iLCJ2YXIgcmVwb3MgPSAoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgcmVwb3MgPSB7fTtcblxuICByZXBvcy5hbGwgPSBbXTtcblxuICByZXBvcy5yZXF1ZXN0UmVwb3MgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICcvZ2l0aHViL3VzZXJzL1NoaWJhU2NyZWFtL3JlcG9zP3Blcl9wYWdlPTEwMCZzb3J0PXVwZGF0ZWQnLFxuICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhLCBtZXNzYWdlLCB4aHIpIHtcbiAgICAgICAgcmVwb3MuYWxsID0gZGF0YTtcbiAgICAgIH1cbiAgICB9KS5kb25lKGNhbGxiYWNrKTtcbiAgfTtcblxuICByZXBvcy53aXRoID0gZnVuY3Rpb24oYXR0cikge1xuICAgIHJldHVybiByZXBvcy5hbGwuZmlsdGVyKGZ1bmN0aW9uKHJlcG8pIHtcbiAgICAgIHJldHVybiByZXBvW2F0dHJdO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiByZXBvcztcbn0pKCk7XG4iLCJ2YXIgcmVwb3NWaWV3ID0gKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIHJlcG9WaWV3ID0ge307XG5cbiAgdmFyIHJlbmRlciA9IEhhbmRsZWJhcnMuY29tcGlsZSgkKCcjcmVwby10ZW1wbGF0ZScpLmh0bWwoKSk7XG5cbiAgcmVwb1ZpZXcuaW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgJGdpdGh1YiA9ICQoJyNnaXRodWInKTtcblxuICAgICRnaXRodWIuZW1wdHkoKTtcblxuICAgICRnaXRodWIuYXBwZW5kKFxuICAgICAgcmVwb3Mud2l0aCgnbmFtZScpLm1hcChyZW5kZXIpXG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gcmVwb1ZpZXc7XG59KSgpO1xuIiwidmFyIHJlc3VtZUNvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIGNvbnRyb2xsZXIgPSB7fTtcblxuICBjb250cm9sbGVyLnNob3cgPSBmdW5jdGlvbiAoY3R4LCBuZXh0KSB7XG4gICAgcmVzdW1lVmlldy5pbml0UGFnZShjdHguam9icyk7XG4gIH07XG5cbiAgY29udHJvbGxlci5sb2FkQWxsID0gZnVuY3Rpb24gKGN0eCwgbmV4dCkge1xuICAgIHZhciBqb2JEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgY3R4LmpvYnMgPSByZXN1bWVEYXRhLmFsbDtcbiAgICAgIG5leHQoKTtcbiAgICB9O1xuXG4gICAgaWYgKHJlc3VtZURhdGEuYWxsLmxlbmd0aCkge1xuICAgICAgam9iRGF0YSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bWVEYXRhLmZldGNoQWxsKGpvYkRhdGEpO1xuICAgIH1cblxuICB9O1xuXG4gIHJldHVybiBjb250cm9sbGVyO1xuXG59KCkpO1xuIiwidmFyIHJlc3VtZURhdGEgPSAoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG4gIC8vIFRPIERPOiBjcmVhdGUgQUpBWCBjYWxsXG5cbiAgZnVuY3Rpb24gSm9iKG9wdHMpIHtcbiAgICBPYmplY3Qua2V5cyhvcHRzKS5mb3JFYWNoKGZ1bmN0aW9uKGUsIGluZGV4LCBrZXlzKSB7XG4gICAgICB0aGlzW2VdID0gb3B0c1tlXTtcbiAgICB9LHRoaXMpO1xuICB9XG5cbiAgSm9iLmFsbCA9IFtdO1xuXG4gIEpvYi5sb2FkQWxsID0gZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgIHRoaXMuYWxsID0gZGF0YVxuICAgICAgLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgRGF0ZShiLmRhdGVGcm9tKSkgLSAobmV3IERhdGUoYS5kYXRlRnJvbSkpO1xuICAgICAgfSlcbiAgICAgIC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBKb2IoaXRlbSk7XG4gICAgICB9KTtcblxuICB9O1xuXG4gIEpvYi5mZXRjaEFsbCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5yZXN1bWVEYXRhICYmIGxvY2FsU3RvcmFnZS5yZXN1bWVEYXRhICE9PSAndW5kZWZpbmVkJykge1xuXG4gICAgICB0aGlzLmxvYWRBbGwoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UucmVzdW1lRGF0YSkpO1xuICAgICAgY2FsbGJhY2soKTtcblxuICAgIH0gZWxzZSB7XG5cbiAgICAgICQuZ2V0SlNPTignLi4vZGF0YS9yZXN1bWVEYXRhLmpzb24nLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBKb2IubG9hZEFsbChkYXRhKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Jlc3VtZURhdGEnLCBKU09OLnN0cmluZ2lmeShKb2IuYWxsKSk7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9KS5mYWlsKGZ1bmN0aW9uICh4LCB0ZXh0U3RhdHVzLCB5KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Jlc3VtZSBmYWlsZWQgdG8gbG9hZC4gRXJyb3I6ICcsIHRleHRTdGF0dXMpO1xuICAgICAgfSk7XG5cbiAgICB9XG5cbiAgfTtcblxuICByZXR1cm4gSm9iO1xufSgpKTtcbiIsInZhciByZXN1bWVWaWV3ID0gKGZ1bmN0aW9uICgpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciB2aWV3ID0ge1xuICAgIHRlbXBsYXRlU2NyaXB0OiAkKCcjcmVzdW1lVGVtcGxhdGUnKS5odG1sKCksXG4gICAgdGhlVGVtcGxhdGU6IG51bGxcbiAgfTtcblxuICB2aWV3LnRvSFRNTCA9IGZ1bmN0aW9uIChqb2IpIHtcblxuICAgIHRoaXMudGhlVGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUodmlldy50ZW1wbGF0ZVNjcmlwdCk7XG5cbiAgICByZXR1cm4gdGhpcy50aGVUZW1wbGF0ZShqb2IpO1xuXG4gIH07XG5cbiAgdmlldy5pbml0UGFnZSA9IGZ1bmN0aW9uIChqb2JzKSB7XG4gICAgJCgnLnNlY3Rpb24tdmlldycpLmhpZGUoKTtcblxuICAgIHZhciAkcmVzdW1lID0gJCgnI3Jlc3VtZScpO1xuXG4gICAgJHJlc3VtZS5lbXB0eSgpO1xuXG4gICAgam9icy5mb3JFYWNoKGZ1bmN0aW9uIChqb2IpIHtcbiAgICAgICRyZXN1bWUuYXBwZW5kKHZpZXcudG9IVE1MKGpvYikpO1xuICAgIH0pO1xuXG4gICAgJHJlc3VtZS5zaG93KCk7XG5cbiAgfTtcblxuICByZXR1cm4gdmlldztcblxufSgpKTtcbiIsInBhZ2UoJy8nLCBpbmRleENvbnRyb2xsZXIuc2hvdyk7XG5wYWdlKCcvcHJvamVjdHMnLCBibG9nQ29udHJvbGxlci5sb2FkQWxsLCBibG9nQ29udHJvbGxlci5zaG93KTtcbnBhZ2UoJy9yZXN1bWUnLCByZXN1bWVDb250cm9sbGVyLmxvYWRBbGwsIHJlc3VtZUNvbnRyb2xsZXIuc2hvdyk7XG5wYWdlKCcvY29udGFjdCcsIGNvbnRhY3RDb250cm9sbGVyLnNob3cpO1xuXG4vLyBUTyBETzogQWRkIGFuIGFjdHVhbCBlcnJvciBwYWdlXG5wYWdlKCcqJywgZnVuY3Rpb24gKCkge1xuICBjb25zb2xlLmVycm9yKCdUaGlzIHNob3VsZCBiZSBhIDQwNCBFcnJvciBQYWdlJyk7XG59KTtcblxucGFnZSgpO1xuIl19
